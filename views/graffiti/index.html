<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <title></title>
  <link rel="stylesheet" type="text/css" href="/style/graffiti/style.css">
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/materialize/0.97.7/css/materialize.min.css">
<!--   <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.0.0/jquery.min.js"></script>
 -->
 <script src="/scripts/jquery.js"></script>
 <script src="https://cdnjs.cloudflare.com/ajax/libs/materialize/0.97.7/js/materialize.min.js"></script>
  <script src="/scripts/jscolor.js"></script>
</head>
<body>

 {{^logged_in}}
<div class = "" id = navBarWrapper>
  <div id = "linksArea">
    <a class = "btn center" href ="/">Home</a>
    <div class = "loginColumn">
      <p data-id={{row}}{{column}} id = "coordinates">Row: <span id="currentRow">"{{row}}"</span> Column: <span id="currentColumn">"{{column}}"</span></p>
    </div>
  </div>

  <form class="form-horizontal graffitiLogin" action="/sessions/create" method="post">
    <fieldset>
      <input type="hidden" name="row" value="{{row}}">
      <input type="hidden" name="column" value="{{column}}">

      <div class = "loginColumn">
        <div class ="loginRow">

          <div class="form-group">
            <input name="username" type="text" class="validate myInput" id="inputUsername" placeholder="Username">
          </div>
          <div class="form-group">
            <input name="password" type="password" class="validate myInput" id="inputPassword" placeholder="Password">
          </div>
          <button type="submit" class="btn center">Login</button>
         </div>
         {{#error}}
            <div class="red-text accent-3">
              <strong>Uh Oh!<strong> {{error}}
            </div>
          {{/error}}
         <div id ="noAccount">No account? <a href="/users/new">Sign Up!</a></div>
      </div>
    </fieldset>
  </form>
  {{/logged_in}}


  {{#logged_in}}
  <div class = "" id = navBarWrapper>
  <div id = "linksArea">
    <div id = "loginColumn">
      <a class = "btn center" href ="/">Home</a>
      <a class='dropdown-button btn center' href='#' data-activates='dropdown1'>Menu</a>
          <ul id='dropdown1' class='dropdown-content'>
            <li><a href="/screenshots/{{username}}">Screenshots</a></li>
            <li><a href="#!">two</a></li>
            <li class="divider"></li>
            <li><a href="/sessions/logout">Logout</a></li>
          </ul>
    </div>
    <div class = "loginColumn">
      <p data-id={{row}}{{column}} id = "coordinates">Row: <span id="currentRow">"{{row}}"</span> Column: <span id="currentColumn">"{{column}}"</span></p>
       {{#isLocked}}
      <div class ="row valign-wrapper">
         <p class = "red-text accent-3 locked col valign">THIS PAGE IS LOCKED BY ANOTHER USER</p>
      </div>
      {{/isLocked}}
    </div>
  </div>
  <div data-id={{username}} class = "valign logo welcome">Welcome, {{username}}!</div>
  <div class ="loginRow">
    <div class ="valign-wrapper loginColumn">
    </div>
    <div class ="valign-wrapper loginColumn">
<!--       <div class = "loginItem">You are logged in. <a href="/sessions/logout">Logout</a></div>
 -->    </div>
  </div>
      {{/logged_in}}
  <div id ="navBarTab">Nav-Bar</div>
</div>
<canvas id="myCanvas"></canvas>
<img id="cursorImagePreview" src="">
<div id="palette">

 <!--  <div class="jscolor paletteBox" id="hexColorWrap">Color Tune<div class="hide" id="hexColorBox"></div></div> -->
  <!-- <input class="jscolor {closable:true,closeText:'Close', onFineChange:'pickerColor(this)'}"
    id = "palettePicker" value="ff3300"> -->

  <!-- <div class=paletteBox id="colorRed">
    <div class="colorSample"></div>
    <div>Red</div>
  </div>
  <div class="paletteBox"id="colorOrange">
    <div class="colorSample"></div>
    <div>Orange</div>
  </div>
  <div class="paletteBox"id="colorYellow">
    <div class="colorSample"></div>
    <div>Yellow</div>
  </div>
  <div class="paletteBox"id="colorGreen">
    <div class="colorSample"></div>
    <div>Green</div>
  </div>
  <div class="paletteBox"id="colorBlue">
    <div class="colorSample"></div>
    <div>Blue</div>
  </div>
  <div class="paletteBox"id="colorPurple">
    <div class="colorSample"></div>
    <div>Purple</div>
  </div>
  <div class="paletteBox"id="colorBlack">
    <div class="colorSample"></div>
    <div>Black</div>
  </div>
  <div class="paletteBox"id="colorGray">
    <div class="colorSample"></div>
    <div>Gray</div>
  </div>
  <div class="paletteBox"id="colorWhite">
    <div class="colorSample"></div>
    <div>White</div>
  </div> -->
</div>

{{#logged_in}}
{{^isLocked}}
<div id = "paletteOuter">
  <div id = "paletteBoxWrapper">
    <div id ="paletteMoveTab"></div>
    <button
      class="jscolor { onFineChange:'pickerColor(this)'} paletteBox"
      id = "palettePicker"
      value = '66ccff'
      style="border:2px outset black">
      Open Palette
  </button>
  <button class="paletteBox" id="sizeSlider">Brush Size</div></button>
  <button class="paletteBox" id="cursorMode">Tag Wall</button>
  <button class="paletteBox" id="openChooser">Open Image Chooser</button>
  <div class="paletteBox" id="saveScreenshot">Save Screenshot</div>
  <!-- <a  id="downloadScreenshot"><div class="paletteBox">Save</div></a>
  <div class="paletteBox" id="loadCanvas">Load</div> -->
  </div>
</div>

{{/isLocked}}
{{/logged_in}}
<div class="hide" id="notificationWindow">
  <div class="textBox" id="notificationText">Are you sure you want to erase the canvas?</div>
      <div id ="topRow">
        <div class="windowTitle">Warning</div>
      <button class="exitWindowButton" id="">X</button>
      </div>
  <div class="buttonRow">
    <button class="windowButton" id="yes">Yes</button>
    <button class="windowButton" id="no">N0</button>
  </div>
</div>

<div class="hide" id="brushAdjustmentWindow">
  <div class="windowTitle">Adjust Brush Size</div>
  <button class="exitWindowButton" id="">X</button>
  <div class="" id="sliderExample"><canvas id="brushExampleCanvas"></canvas></div>
  <div class="" id="sliderWrapper">
    <div class="" id="sliderBar"></div>
    <div class="" id="sliderHandle"></div>
  </div>
</div>

<div class="hide" id="imageSelectionWrapper">
  <button class="exitWindowButton" id="">X</button>
  <div id="previewWrapper">
    <div id="previewBox">
      <img id="previewImage"></img>
    </div>
  </div>
  <div class = "row imageSearchRow valign-wrapper" id ="topSearch">
    <div class ="input-field col l10 m10 valign" id =searchSelect>
        <select id="searchSelectValue">
          <option value = "search1" id="">Search by Text</option>
          <option value = "search2" id="">See What's Hot</option>
        </select>
    </div>
    <button type = "none" class = "valign btn-large col l1 m1" id="menuExpand">Collapse</button>
<!--     <input type="range" class = "col l4 m4" min="10" max="100" id="imageSlider" value="50">
 -->
  </div>
  <div class = "row imageSearchRow valign-wrapper" id ="bottomSearch">
    <input class = "searchText col l5 m5 valign" placeholder = "SearchImages" id="imageSearchBox"></input>
    <div class = "hide valign align-left searchHot col l5 m5" id = "popularSearch">Search Popular Images</div>
    <div class ="valign input-field col l4 m4" id =sortSelect>
        <legend>Sort by:</legend>
        <select id ="sortSelectValue">
          <option value = "searchViral" id="">Viral</option>
          <option value = "searchAllTime" id="">Top All Time</option>
          <option value = "searchThisWeek" id="">Top This Week</option>
        </select>

    </div>
    <button type = "none" class = "valign btn-large col l1 m1" id="imageSearchButton">Submit</button>
  </div>
  <div id="galleryWrapper">
  </div>
  <div id = "paginationRow"></div>
</div>
</body>

  <script type=text/javascript src = /scripts/script.js></script>
  <script type=text/javascript src = /scripts/graffiti/ui.js></script>
  <script type=text/javascript src = /scripts/graffiti/canvasDraw.js></script>
  <script type=text/javascript src = /scripts/graffiti/imgurAjax.js></script>

<script>
  function pickerColor(picker) {
      //cursorColor = picker.toHEXString();
      var palette = document.getElementById('palettePicker');
      palette.innerHTML = picker.toHEXString();

      //console.log(picker.toRGBString())
    }

</script>

{{#logged_in}}
<script>
window.onbeforeunload = unlockPage;
</script>
{{/logged_in}}
</html>
